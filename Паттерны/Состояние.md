# Состояние (State)

## Теория
**Состояние** - позволяет менять поведение объекта в зависимости от его состояния, путем инкапсуляции различной логики в отдельные классы-состояния. Применение паттерна Состояние обычно увеличивает количество классов в архитектуре.

## БСП
- 

## Примеры
- https://github.com/zeegin/DesignPatterns/tree/master/State

## Код
В среде 1С это можно реализовать следующим образом:
1. Для отражения различных состояний этого объекта создаются отдельные перечисления.
2. Описываются общие модули для каждого отдельного состояния, реализующие необходимую бизнес-логику.
3. В общем модуле объекта метаданных или в его обработчиках вызываются модули, соответствующие текущему состоянию объекта.

Рассмотрим документ "Заявка на отпуск" со следующими состояниями:
- Новая
- Согласована
- Отказано

Реализуем следующим образом:
1. Заведем перечисление СостоянияЗаявкиОтпуска
2. Объявим общие модули для каждого состояния:
    - ОбработкаНовойЗаяки
    - ОбработкаСогласованнойЗаявки
    - ОбработкаОтказаннойЗаявки
3. В документе "Заявка на отпуск":
    
        Процедура ПриКорректировке()

            Если Состояние = СостоянияЗаявки.Новая Тогда  
                Модуль = ОбработкаНовойЗаяки;
            ИначеЕсли Состояние = СостоянияЗаявки.Согласована Тогда
                Модуль = ОбработкаСогласованнойЗаявки;
            ИначеЕсли Состояние = СостоянияЗаявки.Отказана Тогда
                Модуль =  ОбработкаОтказаннойЗаявки;
            Иначе
                ВызватьИсключение;
            КонецЕсли;

            Модуль.Обработать(ЭтотОбъект);

        КонецПроцедуры
